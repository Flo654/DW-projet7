{"remainingRequest":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue","mtime":1611135402880},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2ZsbzY1L0Rlc2t0b3AvT3BlbmNsYXNzcm9vbXMvUFJPSkVUUy9EVy1wcm9qZXQ3L2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgZXJyb3IgPSByZWYobnVsbCk7CiAgICB2YXIgdXNlck5hbWUgPSByZWYobnVsbCk7CiAgICB2YXIgcGFzc3dvcmQgPSByZWYobnVsbCk7CiAgICB2YXIgdXNlciA9IHJlZihbXSk7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAzMC9hcGkvdXNlcnMvbG9naW4nOwoKICAgIHZhciBzdWJtaXRGb3JtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHVzZXJMb2dpbiwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VyTG9naW4gPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiB1c2VyTmFtZS52YWx1ZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLnZhbHVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaChVUkwsIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXJMb2dpbikKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5vaykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIm1hdXZhaXMgbm9tIGQndXRpbGlzYXRldXIgb3UgbWF1dmFpcyBtb3QgZGUgcGFzc2UiKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHVzZXIudmFsdWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdXNlci52YWx1ZS50b2tlbik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIHVzZXIudmFsdWUudXNlcklkKTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ01haW5WdWUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gX2NvbnRleHQudDAubWVzc2FnZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnZhbHVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTVdXSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgdXNlcjogdXNlciwKICAgICAgdXNlck5hbWU6IHVzZXJOYW1lLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgIGVycm9yOiBlcnJvciwKICAgICAgc3VibWl0Rm9ybTogc3VibWl0Rm9ybQogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue"],"names":[],"mappings":";;;AAkDA,SAAU,GAAV,QAAqB,KAArB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAGA,eAAe;AACb,EAAA,UAAU,EAAE,EADC;AAGX,EAAA,KAHW,mBAGJ;AAEH,QAAM,KAAI,GAAI,GAAG,CAAC,IAAD,CAAjB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,IAAD,CAApB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,IAAD,CAApB;AACA,QAAI,IAAG,GAAI,GAAG,CAAC,EAAD,CAAd;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,GAAG,GAAE,uCAAX;;AAEA,QAAM,UAAS;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACT,gBAAA,SADS,GACG;AACd,kBAAA,QAAQ,EAAE,QAAQ,CAAC,KADL;AAEd,kBAAA,QAAQ,EAAE,QAAQ,CAAC;AAFL,iBADH;AAAA;AAAA;AAAA,uBAMK,KAAK,CAAC,GAAD,EAAK;AACtB,kBAAA,MAAM,EAAE,MADc;AAEtB,kBAAA,OAAO,EAAE;AAAC,oCAAgB;AAAjB,mBAFa;AAGtB,kBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe,SAAf;AAHgB,iBAAL,CANV;;AAAA;AAMP,gBAAA,IANO;;AAAA,oBAWN,IAAI,CAAC,EAXC;AAAA;AAAA;AAAA;;AAAA,sBAYL,KAAK,CAAC,mDAAD,CAZA;;AAAA;AAAA;AAAA,uBAeQ,IAAI,CAAC,IAAL,EAfR;;AAAA;AAeX,gBAAA,IAAI,CAAC,KAfM;AAgBX,gBAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,IAAI,CAAC,KAAL,CAAW,KAAzC;AACA,gBAAA,YAAY,CAAC,OAAb,CAAqB,MAArB,EAA6B,IAAI,CAAC,KAAL,CAAW,MAAxC;AAGA,gBAAA,MAAM,CAAC,IAAP,CAAa;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAb;AApBW;AAAA;;AAAA;AAAA;AAAA;AAuBX,gBAAA,KAAK,CAAC,KAAN,GAAc,YAAI,OAAlB;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,KAAlB;;AAxBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAT,UAAS;AAAA;AAAA;AAAA,OAAf;;AA4BJ,WAAO;AAAC,MAAA,IAAI,EAAJ,IAAD;AAAM,MAAA,QAAQ,EAAR,QAAN;AAAe,MAAA,QAAQ,EAAR,QAAf;AAAyB,MAAA,KAAK,EAAL,KAAzB;AAAgC,MAAA,UAAU,EAAV;AAAhC,KAAP;AACA;AAzCW,CAAf","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n      <div class=\"container-logo\">\r\n          <img src=\"../assets/icon-left-font-monochrome-white.png\" alt=\"logo entreprise\" width=\"200\" >\r\n      </div>\r\n       <form class=\"form\" id=\"login\" @submit.prevent =\"submitForm\">\r\n            <h1 class=\"form__title\">Se connecter</h1>\r\n            <div class=\"form__message form__message--error\"></div>\r\n            <div class=\"form__input-group\">\r\n                <input \r\n                class=\"form__input\"\r\n                type=\"text\"                             \r\n                v-model=\"userName\" \r\n                id=\"username\" \r\n                placeholder=\"Votre pseudo\" \r\n                data-trigger=\"hover\" \r\n                minlength=\"2\" \r\n                maxlength=\"20\" \r\n                required>\r\n                <div class=\"form__input-error-message\"></div>\r\n            </div>\r\n            <div class=\"form__input-group\">\r\n                <input \r\n                type=\"password\" \r\n                class=\"form__input\" \r\n                id=\"password\"               \r\n                v-model=\"password\"\r\n                placeholder=\"Mot de passe\"\r\n               \r\n                 \r\n                required\r\n                >\r\n                \r\n                <div class=\"form__input-error-message\"></div>\r\n            </div>\r\n            <button class=\"form__button\" >Continue</button>\r\n            \r\n            <p class=\"form__text\">\r\n                <a href=\"#\" class=\"form__link\">Mot de passe oubli√©?</a>\r\n            </p>\r\n            <p class=\"form__text\">\r\n                <router-link :to=\"{name: 'Signup'}\" >pas de compte? Creer un compte</router-link>\r\n               \r\n            </p>\r\n        </form>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {  ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\n\r\nexport default {\r\n  components: {  },\r\n\r\n    setup(){\r\n        \r\n        const error = ref(null)\r\n        const userName = ref(null)\r\n        const password = ref(null)\r\n        let user = ref([])\r\n        const router = useRouter()       \r\n        const URL= 'http://localhost:3030/api/users/login'       \r\n        \r\n        const submitForm = async ()=>{\r\n            const userLogin = {\r\n                userName: userName.value,\r\n                password: password.value\r\n            }            \r\n            try {              \r\n                let data= await fetch(URL,{\r\n                    method: 'POST',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify(userLogin)\r\n                })\r\n                if (!data.ok)   {\r\n                throw Error(\"mauvais nom d'utilisateur ou mauvais mot de passe\")\r\n                }   \r\n                \r\n                user.value = await data.json()\r\n                localStorage.setItem('token', user.value.token)\r\n                localStorage.setItem('user', user.value.userId)\r\n                \r\n\r\n                router.push( { name: 'MainVue'})\r\n\r\n            } catch (err) {\r\n                error.value = err.message\r\n                console.log(error.value)\r\n                \r\n            }\r\n    }   \r\n    return {user,userName,password, error, submitForm}\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\nbody {\r\n    margin: 0;    \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 18px;    \r\n    \r\n}\r\n\r\nh1{\r\n    font-size: 18px;\r\n}\r\n#login{\r\n    width: 60%;\r\n    max-width: 400px;\r\n    height: 270px;    \r\n    margin: 4rem auto;\r\n    padding: 2rem;\r\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\r\n    border-radius: 4px;\r\n    background: rgba(255,255,255,0.6)\r\n\r\n}\r\n.container {   \r\n    width: 100%;  \r\n    height: 100vh;\r\n    \r\n    background-image: url('../assets//ob_44860e_lac-blanc-110.jpg');\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    \r\n}\r\n .container-logo{\r\n     padding-top: 2rem;\r\n }\r\n\r\n.container,\r\n.form__input,\r\n.form__button {\r\n    font: 500 0.8rem 'Quicksand', sans-serif;\r\n}\r\n\r\n.form--hidden {\r\n    display: none;\r\n}\r\n\r\n.form > *:first-child {\r\n    margin-top: 0;\r\n}\r\n\r\n.form > *:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.form__title {\r\n    margin-bottom: 1rem;\r\n    text-align: center;\r\n}\r\n\r\n.form__message {\r\n    text-align: center;\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.form__message--success {\r\n    color: #4bb544;\r\n}\r\n\r\n.form__message--error {\r\n    color: #cc3333;\r\n}\r\n\r\n.form__input-group {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.form__input {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 0.75rem;\r\n    box-sizing: border-box;\r\n    border-radius: 4px;\r\n    border: 1px solid #dddddd;\r\n    outline: none;\r\n    background: #eeeeee;\r\n    transition: background 0.2s, border-color 0.2s;\r\n}\r\n\r\n.form__input:focus {\r\n    border-color: #19177c;\r\n    background: #ffffff;\r\n}\r\n\r\n.form__input--error {\r\n    color: #cc3333;\r\n    border-color: #cc3333;\r\n}\r\n\r\n.form__input-error-message {\r\n    margin-top: 0.5rem;\r\n    font-size: 0.85rem;\r\n    color:#cc3333;\r\n}\r\n\r\n.form__button {\r\n    width: 100%;\r\n    padding: 1rem 2rem;\r\n    font-weight: bold;\r\n    font-size: 0.8rem;\r\n    color: #ffffff;\r\n    border: none;\r\n    border-radius: 4px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    background: #19177c;\r\n}\r\n\r\n.form__button:hover {\r\n    background:  #757eaf;\r\n}\r\n\r\n.form__button:active {\r\n    transform: scale(0.98);\r\n}\r\n\r\n.form__text {\r\n    text-align: center;\r\n}\r\n\r\n.form__link {\r\n    color: #252c6a;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.form__link:hover {\r\n    text-decoration: underline;\r\n}\r\n\r\na{\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n</style>"],"sourceRoot":""}]}