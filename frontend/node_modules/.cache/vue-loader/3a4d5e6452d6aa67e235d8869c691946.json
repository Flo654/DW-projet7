{"remainingRequest":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue","mtime":1611135402880},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyAgcmVmIH0gZnJvbSAndnVlJw0KaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcicNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgIH0sDQoNCiAgICBzZXR1cCgpew0KICAgICAgICANCiAgICAgICAgY29uc3QgZXJyb3IgPSByZWYobnVsbCkNCiAgICAgICAgY29uc3QgdXNlck5hbWUgPSByZWYobnVsbCkNCiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSByZWYobnVsbCkNCiAgICAgICAgbGV0IHVzZXIgPSByZWYoW10pDQogICAgICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpICAgICAgIA0KICAgICAgICBjb25zdCBVUkw9ICdodHRwOi8vbG9jYWxob3N0OjMwMzAvYXBpL3VzZXJzL2xvZ2luJyAgICAgICANCiAgICAgICAgDQogICAgICAgIGNvbnN0IHN1Ym1pdEZvcm0gPSBhc3luYyAoKT0+ew0KICAgICAgICAgICAgY29uc3QgdXNlckxvZ2luID0gew0KICAgICAgICAgICAgICAgIHVzZXJOYW1lOiB1c2VyTmFtZS52YWx1ZSwNCiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUNCiAgICAgICAgICAgIH0gICAgICAgICAgICANCiAgICAgICAgICAgIHRyeSB7ICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBsZXQgZGF0YT0gYXdhaXQgZmV0Y2goVVJMLHsNCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSwNCiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlckxvZ2luKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgaWYgKCFkYXRhLm9rKSAgIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigibWF1dmFpcyBub20gZCd1dGlsaXNhdGV1ciBvdSBtYXV2YWlzIG1vdCBkZSBwYXNzZSIpDQogICAgICAgICAgICAgICAgfSAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHVzZXIudmFsdWUgPSBhd2FpdCBkYXRhLmpzb24oKQ0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHVzZXIudmFsdWUudG9rZW4pDQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCB1c2VyLnZhbHVlLnVzZXJJZCkNCiAgICAgICAgICAgICAgICANCg0KICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCB7IG5hbWU6ICdNYWluVnVlJ30pDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gZXJyLm1lc3NhZ2UNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci52YWx1ZSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICB9ICAgDQogICAgcmV0dXJuIHt1c2VyLHVzZXJOYW1lLHBhc3N3b3JkLCBlcnJvciwgc3VibWl0Rm9ybX0NCiAgICB9DQoNCn0NCg0K"},{"version":3,"sources":["C:\\Users\\flo65\\Desktop\\Openclassrooms\\PROJETS\\DW-projet7\\frontend\\src\\components\\Login.vue"],"names":[],"mappings":"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","file":"C:/Users/flo65/Desktop/Openclassrooms/PROJETS/DW-projet7/frontend/src/components/Login.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n      <div class=\"container-logo\">\r\n          <img src=\"../assets/icon-left-font-monochrome-white.png\" alt=\"logo entreprise\" width=\"200\" >\r\n      </div>\r\n       <form class=\"form\" id=\"login\" @submit.prevent =\"submitForm\">\r\n            <h1 class=\"form__title\">Se connecter</h1>\r\n            <div class=\"form__message form__message--error\"></div>\r\n            <div class=\"form__input-group\">\r\n                <input \r\n                class=\"form__input\"\r\n                type=\"text\"                             \r\n                v-model=\"userName\" \r\n                id=\"username\" \r\n                placeholder=\"Votre pseudo\" \r\n                data-trigger=\"hover\" \r\n                minlength=\"2\" \r\n                maxlength=\"20\" \r\n                required>\r\n                <div class=\"form__input-error-message\"></div>\r\n            </div>\r\n            <div class=\"form__input-group\">\r\n                <input \r\n                type=\"password\" \r\n                class=\"form__input\" \r\n                id=\"password\"               \r\n                v-model=\"password\"\r\n                placeholder=\"Mot de passe\"\r\n               \r\n                 \r\n                required\r\n                >\r\n                \r\n                <div class=\"form__input-error-message\"></div>\r\n            </div>\r\n            <button class=\"form__button\" >Continue</button>\r\n            \r\n            <p class=\"form__text\">\r\n                <a href=\"#\" class=\"form__link\">Mot de passe oubli√©?</a>\r\n            </p>\r\n            <p class=\"form__text\">\r\n                <router-link :to=\"{name: 'Signup'}\" >pas de compte? Creer un compte</router-link>\r\n               \r\n            </p>\r\n        </form>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {  ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\n\r\nexport default {\r\n  components: {  },\r\n\r\n    setup(){\r\n        \r\n        const error = ref(null)\r\n        const userName = ref(null)\r\n        const password = ref(null)\r\n        let user = ref([])\r\n        const router = useRouter()       \r\n        const URL= 'http://localhost:3030/api/users/login'       \r\n        \r\n        const submitForm = async ()=>{\r\n            const userLogin = {\r\n                userName: userName.value,\r\n                password: password.value\r\n            }            \r\n            try {              \r\n                let data= await fetch(URL,{\r\n                    method: 'POST',\r\n                    headers: {'Content-Type': 'application/json'},\r\n                    body: JSON.stringify(userLogin)\r\n                })\r\n                if (!data.ok)   {\r\n                throw Error(\"mauvais nom d'utilisateur ou mauvais mot de passe\")\r\n                }   \r\n                \r\n                user.value = await data.json()\r\n                localStorage.setItem('token', user.value.token)\r\n                localStorage.setItem('user', user.value.userId)\r\n                \r\n\r\n                router.push( { name: 'MainVue'})\r\n\r\n            } catch (err) {\r\n                error.value = err.message\r\n                console.log(error.value)\r\n                \r\n            }\r\n    }   \r\n    return {user,userName,password, error, submitForm}\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\nbody {\r\n    margin: 0;    \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 18px;    \r\n    \r\n}\r\n\r\nh1{\r\n    font-size: 18px;\r\n}\r\n#login{\r\n    width: 60%;\r\n    max-width: 400px;\r\n    height: 270px;    \r\n    margin: 4rem auto;\r\n    padding: 2rem;\r\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\r\n    border-radius: 4px;\r\n    background: rgba(255,255,255,0.6)\r\n\r\n}\r\n.container {   \r\n    width: 100%;  \r\n    height: 100vh;\r\n    \r\n    background-image: url('../assets//ob_44860e_lac-blanc-110.jpg');\r\n    background-size: cover;\r\n    background-repeat: no-repeat;\r\n    \r\n}\r\n .container-logo{\r\n     padding-top: 2rem;\r\n }\r\n\r\n.container,\r\n.form__input,\r\n.form__button {\r\n    font: 500 0.8rem 'Quicksand', sans-serif;\r\n}\r\n\r\n.form--hidden {\r\n    display: none;\r\n}\r\n\r\n.form > *:first-child {\r\n    margin-top: 0;\r\n}\r\n\r\n.form > *:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.form__title {\r\n    margin-bottom: 1rem;\r\n    text-align: center;\r\n}\r\n\r\n.form__message {\r\n    text-align: center;\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.form__message--success {\r\n    color: #4bb544;\r\n}\r\n\r\n.form__message--error {\r\n    color: #cc3333;\r\n}\r\n\r\n.form__input-group {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.form__input {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 0.75rem;\r\n    box-sizing: border-box;\r\n    border-radius: 4px;\r\n    border: 1px solid #dddddd;\r\n    outline: none;\r\n    background: #eeeeee;\r\n    transition: background 0.2s, border-color 0.2s;\r\n}\r\n\r\n.form__input:focus {\r\n    border-color: #19177c;\r\n    background: #ffffff;\r\n}\r\n\r\n.form__input--error {\r\n    color: #cc3333;\r\n    border-color: #cc3333;\r\n}\r\n\r\n.form__input-error-message {\r\n    margin-top: 0.5rem;\r\n    font-size: 0.85rem;\r\n    color:#cc3333;\r\n}\r\n\r\n.form__button {\r\n    width: 100%;\r\n    padding: 1rem 2rem;\r\n    font-weight: bold;\r\n    font-size: 0.8rem;\r\n    color: #ffffff;\r\n    border: none;\r\n    border-radius: 4px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    background: #19177c;\r\n}\r\n\r\n.form__button:hover {\r\n    background:  #757eaf;\r\n}\r\n\r\n.form__button:active {\r\n    transform: scale(0.98);\r\n}\r\n\r\n.form__text {\r\n    text-align: center;\r\n}\r\n\r\n.form__link {\r\n    color: #252c6a;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.form__link:hover {\r\n    text-decoration: underline;\r\n}\r\n\r\na{\r\n    text-decoration: none;\r\n}\r\n\r\n\r\n</style>"]}]}